---
import { experiences } from '../data/experience';
---

<section
  id="experience"
  class="py-10 md:py-20 px-8 md:px-12 lg:px-20 xl:px-32 2xl:px-40"
>
  <div class="max-w-[2500px] mx-auto">
    <!-- Section heading -->
    <div
      data-reveal
      data-reveal-threshold="0.3"
      class="text-center md:text-left"
    >
      <p class="text-primary text-base 3xl:text-xl tracking-widest uppercase mb-4">Career</p>
      <h2 class="font-serif text-5xl md:text-6xl text-foreground mb-4">Experience</h2>
      <p class="text-text-muted text-base 3xl:text-xl mb-20">Where I've built and led</p>
    </div>

    <div class="flex flex-col">
      {experiences.map((exp, i) => {
        const isEven = i % 2 === 0;
        return (
          <>
            <!-- Entry -->
            <div
              data-reveal
              class="grid grid-cols-1 min-[1100px]:grid-cols-2 gap-12 min-[1100px]:gap-20 items-center"
            >
              <!-- Text column -->
              <div class={`${isEven ? 'min-[1100px]:order-2' : 'min-[1100px]:order-1'} order-1 flex flex-col gap-3 items-center text-center min-[1100px]:items-start min-[1100px]:text-left`}>
                <span class="text-text-muted text-base 3xl:text-xl tracking-widest uppercase">
                  {exp.period}
                </span>
                <h3 class="font-serif text-2xl md:text-3xl text-foreground leading-tight">
                  {exp.title}
                </h3>
                <a
                  href={exp.companyUrl}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-accent hover:text-accent-hover transition-colors text-lg w-fit"
                >
                  {exp.company}
                </a>
                <p class="text-text-body text-base 3xl:text-xl leading-relaxed">
                  {exp.description}
                </p>
                <div class="flex flex-wrap justify-center min-[1100px]:justify-start gap-2 mt-2">
                  {exp.tech.map((t) => (
                    <span class="text-sm text-text-muted bg-bg-subtle border border-border rounded-full px-3 py-1">
                      {t}
                    </span>
                  ))}
                </div>
              </div>

              <!-- Logo column -->
              <div class={`${isEven ? 'min-[1100px]:order-1' : 'min-[1100px]:order-2'} order-2 flex justify-center`}>
                <div class="flex items-center justify-center w-full max-w-[800px] h-[200px]">
                  <img
                    src={exp.logo}
                    alt={`${exp.company} logo`}
                    class="opacity-80 w-full h-full object-contain"
                    loading="lazy"
                  />
                </div>
              </div>
            </div>

            <!-- Arrow connector between entries -->
            {i < experiences.length - 1 && (
              <div class="flex justify-center py-8">
                <svg
                  data-reveal-arrow
                  width="3"
                  height="100"
                  viewBox="0 0 3 100"
                  class="overflow-visible"
                >
                  <line
                    x1="1.5" y1="0" x2="1.5" y2="80"
                    stroke="#7088aa"
                    stroke-width="1.5"
                    class="arrow-line"
                  />
                  <polyline
                    points="-4,80 1.5,90 7,80"
                    fill="none"
                    stroke="#7088aa"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="arrow-head"
                  />
                </svg>
              </div>
            )}
          </>
        );
      })}
    </div>
  </div>
</section>
