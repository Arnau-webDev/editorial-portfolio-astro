---
interface Props {
  variant?: 'case-study';
}

const { variant } = Astro.props;

const NAV_LINKS = [
  { label: 'Experience', href: '/#experience' },
  { label: 'Projects', href: '/#projects' },
  { label: 'Skills', href: '/#skills' },
  { label: 'Contact', href: '/#contact' },
];
---

<header
  id="site-header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 border-b border-transparent"
>
  <div class="max-w-[2500px] mx-auto px-8 md:px-12 lg:px-20 xl:px-32 2xl:px-40 h-16 flex items-center justify-between">
    <a href="/" class="font-serif text-foreground text-lg tracking-tight">
      Arnau Marquilles
    </a>

    {variant === 'case-study' ? (
      <a
        href="/#projects"
        class="inline-flex items-center gap-2 text-text-muted hover:text-foreground transition-colors duration-200 text-sm"
      >
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5" />
          <path d="m12 19-7-7 7-7" />
        </svg>
        Back to portfolio
      </a>
    ) : (
      <>
        {/* Desktop nav */}
        <nav class="hidden md:flex items-center gap-8">
          {NAV_LINKS.map((link) => (
            <a
              href={link.href}
              class="text-xl text-text-muted hover:text-foreground transition-colors duration-200"
            >
              {link.label}
            </a>
          ))}
        </nav>

        {/* Mobile hamburger */}
        <button
          id="menu-open"
          class="md:hidden text-text-muted hover:text-foreground transition-colors duration-200"
          aria-label="Open menu"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
            <line x1="4" y1="7" x2="20" y2="7" />
            <line x1="4" y1="12" x2="20" y2="12" />
            <line x1="4" y1="17" x2="20" y2="17" />
          </svg>
        </button>
      </>
    )}
  </div>
</header>

{/* Mobile overlay â€” only rendered for non-case-study pages */}
{variant !== 'case-study' && (
  <div
    id="mobile-overlay"
    class="fixed inset-0 z-[60] bg-background transition-opacity duration-300 opacity-0 pointer-events-none"
  >
    <div class="flex items-center justify-end px-6 h-16">
      <button
        id="menu-close"
        class="text-text-muted hover:text-foreground transition-colors duration-200"
        aria-label="Close menu"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
          <line x1="6" y1="6" x2="18" y2="18" />
          <line x1="18" y1="6" x2="6" y2="18" />
        </svg>
      </button>
    </div>
    <nav class="flex flex-col items-center justify-center gap-10 h-[calc(100vh-4rem)]">
      {NAV_LINKS.map((link) => (
        <a
          href={link.href}
          class="font-serif text-2xl text-text-muted hover:text-foreground transition-colors duration-200"
        >
          {link.label}
        </a>
      ))}
    </nav>
  </div>
)}

<style>
  /* Scrolled state toggled by header.ts */
  #site-header.is-scrolled {
    background-color: hsl(var(--background) / 0.9);
    backdrop-filter: blur(4px);
    border-bottom-color: hsl(var(--border));
  }

  /* Mobile overlay open state */
  #mobile-overlay.is-open {
    opacity: 1;
    pointer-events: auto;
  }
</style>
